<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
       "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <title>Installation Guide</title>
</head>

<body>
<h1>Apache Sandesha2/C Installation Guide</h1>

<p>This document guides you on how to install Sandesha2/C with Axis2/C, and
run the server and client samples on Linux and Microsoft Windows operating
systems.</p>

<p>This release comes in two forms, source and binary. This document covers
both forms.</p>

<p>Please send your feedback to the developer mailing list: <a
href="mailto:axis-c-dev@ws.apache.org">axis-c-dev@ws.apache.org</a>
(Subscription details are available on the <a
href="http://ws.apache.org/sandesha/sandesha2/c">Sandesha2 site</a>.) Please
remember to prefix the subject with [Axis2].</p>

<h2>Contents</h2>
<ul>
  <li><a href="#linux">Installing and Running on Linux</a>
    <ul>
      <li><a href="#linux_source">Using the Source Release</a></li>
      <li><a href="#linux_binary">Using the Binary Release</a></li>
    </ul>
  </li>
  <li><a href="#win">Installing and Running on Microsoft Windows (win32)</a>
    <ul>
      <li><a href="#win_source">Using the Source Release</a></li>
      <li><a href="#win_binary">Using the Binary Release</a></li>
    </ul>
  </li>
</ul>
<a id="linux"></a>

<h2>1. Installing and Running on Linux</h2>

<p>This can be done using binary or source distributions. (<a
href="http://ws.apache.org/sandesha/sandesha2/c/download.cgi">Download</a>
the two distributions)</p>
<a id="linux_source"></a>

<h3>1.1. Installing Sandesha2/C Source Release on Linux</h3>

<p>This version of Sandesha2/C depends on Axis2/C 1.3.0 <a
href="http://ws.apache.org/axis2/c/download.cgi">Download Axis2/C</a> from
and install.</p>
<ol>
  <li>Download Sandesha2 source distribution</li>
  <li>Extract the source distribution and go to extracted directory</li>
  <li>Run configure with AXIS2 include path.
    <pre>./configure --prefix=&lt;axis2c_deploy_path&gt; --enable-static=no --with-axis2=&lt;axis2c_deploy_path&gt;</pre>
  </li>
  <li>Run make and make install</li>
</ol>
This will install the Sandesha2/C as a module in Axis2/C in
&lt;axis2c_deploy_path&gt;/modules folder. The module folder contains the
Sandesha2/C libraries and the module.xml file. <a id="linux_binary">It will
also install the libsandesha2_client.so into &lt;axis2c_deploy_path&gt;lib
folder. Sandesha2 include files are copied into
&lt;axis2c_deploy_path&gt;include folder.</a>

<p>To install the samples go into samples folder and do</p>

<p> ./configure --prefix=&lt;axis2c_deploy_path&gt;
--with-axis2=&lt;axis2c_include_path&gt;</p>

<p>make</p>

<p>make install</p>

<h3>1.2. Installing Sandesha2/C Binary Release on Linux</h3>

<p>Sandesha2/C binary distribution for Linux has the following folder
structure.</p>
<pre>   
    Sandesha2
        |
        + - modules/sandesha2 (sandesha2 module library and module.xml file)
        + - docs
        + - config (Contain sample module.xml and axis2.xml files)
        |
        + - samples
               |
               + - source files of samples in folders
        + - services (Contain sample service)
        |
        + - include ( header files)
        + - bin/samples ( sample executables)
        + - lib (libsandesha2_client.so)</pre>

<p>To deploy Sandesha2/C in Axis2/C running environment copy the
modules/sandesha2 into &lt;axis2c_deploy_path&gt;/modules folder. Also copy
the libsandesha2_client.so into &lt;axis2c_deploy_path&gt;/lib folder. Do the
necessary changes to the &lt;axis2c_deploy_path&gt;/axis2.xml to run
Sandesha2/C(Refer to the sample config/axis2.xml for help). To run samples
copy the server sample services/RMSampleService into
&lt;axis2c_deploy_path&gt;/services folder and start the server. Then you can
run the client samples in bin/samples/sandesha2. To see the messages passing
through the wire use a Tcp Monitor.</p>
<a id="win"></a>

<h2>2. Installing and Running on Microsoft Windows</h2>

<p>This too can be done using binary or source distributions. (<a
href="http://ws.apache.org/sandesha/sandesha2/c/download.cgi">Download</a>
the two distributions.)</p>
<a id="win_source"></a>

<h3>2.1. Installing Sandesha2/C Source Release on Windows</h3>
<ol>
  <li>You need to have unzipped Axis2/C 1.3.0 release binary to some
  folder.</li>
  <li>On your cmd.exe cd to &lt;sandesha2 src&gt;\build\win32 <br />
    Edit configure.in file with your binary locations. <br />
  </li>
  <li>To set necessary environment variables on command line run vcvars32.bat
    file.</li>
  <li>Run nmake dist command on command line. This will build the Sandesha2/C
    binary and samples to a directory sandesha2 in &lt;sandesha2
    src&gt;\build\sandesha2.</li>
</ol>
<a id="bin_binaries"></a>

<h3>2. 2. Installing Sandesha2/C Binary Release on Windows</h3>

<p>Sandesha2/C binary distribution will have following directory
structure.</p>
<pre>    Sandesha2
        |
        + - Sandesha2 (sandesha2 module dll and module.xml file)
        |
        + - samples
               |
               + - bin 
               |
               + - source files of samples in folders
        |
        + - include ( header files)
        + - lib (sandesha2_client.dll)
    </pre>
<ol>
  <li>Copy Sandesha2 directory ( containing sandesha2 dll and module.xml ) to
    &lt;AXIS2C_HOME&gt;\modules directory.</li>
  <li>Copy RMSampleService directory in samples\bin directory to
    &lt;AXIS2C_HOME&gt;\services directory</li>
  <li>Copy axis2.xml file in Sandesha2 directory to &lt;AXIS2C_HOME&gt;</li>
</ol>

<p>Now you should be able to run the samples.</p>

<h3>Notes</h3>
<ol>
  <li>Sandesha2 internally uses an Sqlite3 embedded database. You need to
    provide where to create this database in
    <p>module.xml file as following.</p>
    <p>&lt;parameter name="sandesha2_db"
    locked="false"&gt;&lt;path&gt;/sandesha2_db&lt;/parameter&gt;</p>
    <p>If you use Axis2/C Apache2 module instead of simple_axis2_server make
    sure that Apache2 user can access the above database file.</p>
    <p>If you do not provide the above database parameter, be aware that
    Sandesha2/C will create the database file named sandesha2_db in the
    current folder.</p>
    <p></p>
  </li>
  <li>Sandesha2/C module is installed into
    &lt;axis2c_deploy_path&gt;/modules/sandesha2c directory. The installed
    module contain libsandesha2.so, module.xml. The sample clients are
    installed into &lt;axis2c_deploy_path&gt;/bin/samples directory. Sample
    services are installed into &lt;axis2c_deploy_path&gt;/services
  directory.</li>
</ol>
</body>
</html>
